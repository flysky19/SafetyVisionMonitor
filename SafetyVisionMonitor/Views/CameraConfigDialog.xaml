<Window x:Class="SafetyVisionMonitor.Views.CameraConfigDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:syncfusion="http://schemas.syncfusion.com/wpf"
        mc:Ignorable="d"
        Title="카메라 설정" 
        Height="500" Width="600"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        Background="#1A1A1A">
    
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- 설정 폼 -->
        <ScrollViewer Grid.Row="0" VerticalScrollBarVisibility="Auto">
            <StackPanel>
                <!-- 기본 정보 -->
                <Border Background="#2D2D30" CornerRadius="5" Padding="15" Margin="0,0,0,10">
                    <StackPanel>
                        <TextBlock Text="기본 정보" FontSize="16" FontWeight="Bold" 
                                 Foreground="White" Margin="0,0,0,15"/>
                        
                        <!-- 카메라 이름 -->
                        <TextBlock Text="카메라 이름" Foreground="Gray" Margin="0,0,0,5"/>
                        <TextBox Text="{Binding Camera.Name}" 
                               Background="#1A1A1A" Foreground="White" 
                               BorderBrush="#444" Padding="5"
                               Margin="0,0,0,15"/>
                        
                        <!-- 카메라 ID (읽기 전용) -->
                        <TextBlock Text="카메라 ID" Foreground="Gray" Margin="0,0,0,5"/>
                        <TextBox Text="{Binding Camera.Id, Mode=OneWay}" 
                               IsReadOnly="True"
                               Background="#333" Foreground="Gray" 
                               BorderBrush="#444" Padding="5"
                               Margin="0,0,0,15"/>
                    </StackPanel>
                </Border>
                
                <!-- 연결 설정 -->
                <Border Background="#2D2D30" CornerRadius="5" Padding="15" Margin="0,0,0,10">
                    <StackPanel>
                        <TextBlock Text="연결 설정" FontSize="16" FontWeight="Bold" 
                                 Foreground="White" Margin="0,0,0,15"/>
                        
                        <!-- 연결 타입 -->
                        <TextBlock Text="연결 방식" Foreground="Gray" Margin="0,0,0,5"/>
                        <ComboBox SelectedItem="{Binding Camera.Type}"
                                ItemsSource="{Binding CameraTypes}"
                                Background="#1A1A1A" Foreground="Black"
                                Margin="0,0,0,15"/>
                        
                        <!-- 연결 문자열 -->
                        <TextBlock Text="연결 정보" Foreground="Gray" Margin="0,0,0,5"/>
                        <TextBox Text="{Binding Camera.ConnectionString}" 
                               Background="#1A1A1A" Foreground="White" 
                               BorderBrush="#444" Padding="5"
                               Margin="0,0,0,5"/>
                        <TextBlock Text="{Binding ConnectionHint}" 
                                 Foreground="#888" FontSize="11" 
                                 Margin="0,0,0,15"/>
                        
                        <!-- 연결 테스트 -->
                        <Button Content="연결 테스트" 
                              Command="{Binding TestConnectionCommand}"
                              HorizontalAlignment="Left"
                              Width="120" Padding="8,5"
                              Background="#007ACC" Foreground="White"
                              BorderThickness="0"/>
                        <TextBlock Text="{Binding TestResult}" 
                                 Foreground="{Binding TestResultColor}"
                                 FontSize="12" Margin="0,5,0,0"/>
                    </StackPanel>
                </Border>
                
                <!-- 영상 설정 -->
                <Border Background="#2D2D30" CornerRadius="5" Padding="15" Margin="0,0,0,10">
                    <StackPanel>
                        <TextBlock Text="영상 설정" FontSize="16" FontWeight="Bold" 
                                 Foreground="White" Margin="0,0,0,15"/>
                        
                        <!-- 해상도 -->
                        <Grid Margin="0,0,0,15">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="20"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <StackPanel Grid.Column="0">
                                <TextBlock Text="너비 (픽셀)" Foreground="Gray" Margin="0,0,0,5"/>
                                <syncfusion:IntegerTextBox Value="{Binding Camera.Width}"
                                                         MinValue="320" MaxValue="3840"
                                                         Background="#1A1A1A" Foreground="White"/>
                            </StackPanel>
                            
                            <TextBlock Grid.Column="1" Text="×" 
                                     Foreground="Gray"
                                     VerticalAlignment="Center" 
                                     HorizontalAlignment="Center"
                                     Margin="0,20,0,0"/>
                            
                            <StackPanel Grid.Column="2">
                                <TextBlock Text="높이 (픽셀)" Foreground="Gray" Margin="0,0,0,5"/>
                                <syncfusion:IntegerTextBox Value="{Binding Camera.Height}"
                                                         MinValue="240" MaxValue="2160"
                                                         Background="#1A1A1A" Foreground="White"/>
                            </StackPanel>
                        </Grid>
                        
                        <!-- 프리셋 버튼 -->
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,15">
                            <Button Content="HD (1280×720)" 
                                  Command="{Binding SetResolutionCommand}"
                                  CommandParameter="HD"
                                  Margin="0,0,5,0" Padding="8,3"/>
                            <Button Content="FHD (1920×1080)" 
                                  Command="{Binding SetResolutionCommand}"
                                  CommandParameter="FHD"
                                  Margin="0,0,5,0" Padding="8,3"/>
                            <Button Content="4K (3840×2160)" 
                                  Command="{Binding SetResolutionCommand}"
                                  CommandParameter="4K"
                                  Padding="8,3"/>
                        </StackPanel>
                        
                        <!-- FPS -->
                        <TextBlock Text="FPS (프레임/초)" Foreground="Gray" Margin="0,0,0,5"/>
                        <syncfusion:UpDown Value="{Binding Camera.Fps}"
                                                   MinValue="1" MaxValue="60"
                                                   NumberDecimalDigits="0"
                                                   Background="#1A1A1A" Foreground="White"/>
                    </StackPanel>
                </Border>
            </StackPanel>
        </ScrollViewer>
        
        <!-- 버튼 영역 -->
        <Border Grid.Row="1" Background="#2D2D30" CornerRadius="5" Padding="15" Margin="0,10,0,0">
            <Grid>
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Left">
                    <Button Content="설정 불러오기" 
                          Command="{Binding LoadConfigCommand}"
                          Padding="10,5" Margin="0,0,5,0"/>
                    <Button Content="설정 저장" 
                          Command="{Binding SaveConfigCommand}"
                          Padding="10,5"/>
                </StackPanel>
                
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                    <syncfusion:ButtonAdv Label="확인" 
                                        IsDefault="True"
                                        Click="OnOkClick"
                                        Width="80" Margin="0,0,10,0"/>
                    <syncfusion:ButtonAdv Label="취소" 
                                          IsCancel="True"
                                          Click="OnCancelClick"
                                          Width="80"/>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</Window>